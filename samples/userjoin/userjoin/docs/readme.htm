<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>A 3-way Conference sample</title>
</head>
<body style="font-family: Tahoma; font-size: 10pt">
<table width="100%" border="0" cellspacing="10">
	<tr>
		<td colspan="3" align="center">
		<H2>A 3-way Conference sample</H2>
		</td>
	</tr>
	<tr>
		<td colspan="3">
		<hr>
		</td>
	</tr>
</table>
<!----------------- Beginning of the Content ---------------------->
<h2>Overview</h2>
<blockquote>
<p>This sample application demonstrates how to implement a 3 way
conference using 3rd party joins, based on the SIP service example from
<a href="http://www.tech-invite.com/Ti-sip-service-11.html">tech-invite.com</a>
. In this sample the servlet acts like a proxy .</p>
</p>
This sample depends on the registrar sample to get register information
of SIP client. so you have to deploy the registrar sample at the same
time if you want run this sample.</blockquote>
<br>
<h2>Understanding the Sample</h2>
<blockquote>
<p><a
	href="../userjoin/WEB-INF/classes/com/micromethod/sipmethod/sample/userjoin/UserJoinServlet.java">UserJoinServlet</a>
simply forwards INVITE and subsequent message to callee. It looks up a
map to locate the callee's numbers, the map's data is populated when a
UAC register to the server.</p>
<p>The follow diagram (from <em>tech-invite.com</em>) illustrates
the call flow of UserJoin in sequential search.</p>
<p align="left"><img src="images/fig0.gif" /></p>

<p>For each initial INVITE request from the caller, the servlet
relay the request to the callee.</p>
<p>For more details, please see <a
	href="../userjoin/WEB-INF/classes/com/micromethod/sipmethod/sample/userjoin">source
codes</a>.</p>
</blockquote>
<br>
<h2>Running the Sample</h2>
<blockquote>
<p>The top level directories and files in this sample are:</p>
<table width="100%" border="0" align="center">
	<tr>
		<td width="10%"></td>
		<td><font size="2">docs/</font></td>
		<td><font size="2">the documentation about this sample </font></td>
	</tr>
	<tr>
		<td></td>
		<td><font size="2">userjoin.sar</font></td>
		<td align="left"><font size="2">the application archive
		file (SAR) </font></td>
	</tr>
	<tr>
		<td></td>
		<td><font size="2">userjoin/</font></td>
		<td><font size="2">the exploded application directory </font></td>
	</tr>
	<tr>
</table>
<p>Please follow the following steps to deploy, configure and run
this sample:</p>
<ol>
	<li>This sample depends on registrar sample to get register
	information of SIP client. Depoly registrar sample first. Copy <em>registrar</em>
	directory (or <em>registrar.sar</em>) into <em>$INSTALL_DIR/apps</em>
	directory if you have not.</li>
	<br>
	<li>Copy <em>userjoin</em> directory (or <em>userjoin.sar</em>)
	into <em>$INSTALL_DIR/apps</em> directory. Start Prism Application
	Server if you haven't.</li>

	<br>
	<li>Startup and Configure your X-Lite (or other compatible SIP
	Clients). But make sure that you are using a conference enabled
	client(X-Lite is not conference function enabled,but Bria is) for the
	userjoin account, Because userjoin need make a conference with Alice
	and Carol.
	<p>
	<ul>
		<li>1 Open X-Lite 3.0 or later.</li>
		<li>2 On the display board, right click and select <em> "SIP
		Acount Settings..."</em>.</li>
		<p align="left"><img src="images/mainpanel.png" alt="x-lite" /></p>
		<br>
		<li>3 On the <em>SIP Accounts</em> panel, click <em>Add...</em>.
		</li>
		<p align="left"><img src="images/addacount.png" /></p>
		<br>
		<li>4 Type the User Details and Domain Proxy as follow. In fact,
		you can use any account you like.</li>
		<p align="left"><img src="images/aliceAccount.png" alt="advanced" /></p>
		<li>5 Then click <em>OK</em>.</li>
		<br>
		<li>You need configure the other two accounts , userjoin and
		Carol, on other two computers for this sample. Repeat the forgoing 1-5
		steps twice except that type the user name as userjoin and Carol
		separately in step 4. Here we use Bria client for the userjoin account
		for the conference function. Note that for the userjoin account you
		must use userjoin as the user part of the account.</li>
		<br>
	</ul>
	</p>
	</li>
	<br>

	<li>Register your SIP client to "registrar" application.
	<p>
	<ul>
		<li>Start SIP servlet container (Prism Application Server) as
		<em>user guide</em>.</li>
		<li>Start three clients on three computers with the three
		configured accounts,and they will register to the container.</li>
		<p align="left"><img src="images/aliceReady.png" alt="messenger" /></p>
		<br>
	</ul>
	</p>
	</li>

	<li>Make a call from Alice to userjoin.
	<p>
	<ul>
		<li>Click the right arrow and right click on the Group
		List,select &quot;Add Contact...&quot;.</li>
		<p align="left"><img src="images/addcontact.png" alt="sign-in" /></p>
		<br>
		<li>On the &quot;Add Contact&quot; tab, select
		&quot;Softphone&quot; as the Type,type the name: <strong>userjoin</strong>,
		and then click OK.</li>
		<p align="left"><img src="images/addContactInfo.png" alt="other" /></p>
		<br>
		<li>Right click on the &quot;userjoin&quot; ,and select
		&quot;Call&quot;.</li>
		<p align="left"><img src="images/makeCall.png" alt="dialog" /></p>
		<br>
		<br>
		<li>A call is initialized from Alice to userjoin, userjoin
		accepts the call by clicking on the Answer button on the pop up
		dialog.</li>

		<br>
	</ul>
	</p>
	</li>
	<br>

	<li>Make a call from Carol to userjoin, and userjoin add Alice and
	Carol to the same conference.
	<p>
	<ul>
		<li>Make a call from Carol as the forgoing steps show.</li>
		<br>
		<li>When userjoin receives a call request from Carol, he clicks
		the "Conference All" button as the following diagram shows instead of
		clicking the answer button on the pop up dialog.</li>
		<p align="left"><img src="images/acceptCarol.png" alt="other" /></p>

		<li>By now we established a 3-way Conference.</li>
		<p align="left"><img src="images/conference.png" alt="other" /></p>
		<br>

	</ul>
	</p>
	</li>
	<br>


</ol>
</blockquote>
<br>
<!--------------End of the Content ----------------------->
<table width="100%">
	<tr>
		<td colspan="3">
		<hr>
		</td>
	</tr>
</table>
</body>