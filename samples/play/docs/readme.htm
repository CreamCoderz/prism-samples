<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Player Sample</title>
</head>
<body style="font-family: Tahoma; font-size:10pt">
<table width="100%" border="0" cellspacing="10">
  <tr>
    <td colspan="3" align="center"><H2> Player Sample </H2></td>
  </tr>
  <tr>
    <td colspan="3"><hr>
    </td>
  </tr>
</table>
<!----------------- Beginning of the Content ---------------------->
<h2>Overview</h2>
<blockquote>
	<p>This sample application demonstrates how to write a SIP servlet using JSR-309 API to work with media server. </p>
	<p>PlayerServlet is a very simple application that answers incoming calls and plays a prompt to the caller. At the end of the play, 
		this application sends BYE to terminate the call.</p>
	
	<p align="left"><img src="images/play.jpg"></p>
</blockquote><br>
<h2>Understanding the Sample</h2>
<blockquote>
<p>Upon the receipt of the INVITE, PlayerServlet will create a NetworkConnection, and request the media server to process the given SDP offer from the remote User Agent (e.g. XLite). Once SDP negotiation is complete, PlayerServlet will send back SIP/200OK to the remote User Agent. </p>
<p>When PlayerServlet receives ACK message, it will create a MediaGroup, and join the MediaGroup with the NetworkConnection in DUPLEX direction, then tell the media server to start playing the prompt. At the end of the play, it will send BYE to the remote User Agent to terminate the call, and release the MediaSession.</p>
<p>For more details, please see <a href="../../mscontrol-samples/basic">source codes</a>. </p>

<p>The Media Server location can be configured via sipmethod.xml which can be found in folder <em>$SM_HOME/conf</em>, as shown in the following.</p>
<p>
<pre><code>
   &lt;MediaControl MEDIA_SERVER_URI="mrcp://127.0.0.1:9974" VCM_SERVER_URI="http://127.0.0.1:9995;virtualPlatformId=Default"
        VXML_BROWSER_URI="sip://127.0.0.1:5066;transport=tcp"/&gt;
</code></pre>
</p>
<blockquote>
  <table border="0">
    <tr> 
      <td width="30%"><font size="2"><strong>Attribute</strong></font></td>
      <td width="30%"><font size="2"><strong>Description</strong></font></td>
    </tr>
    <tr> 
      <td width="30%"><font size="2">MEDIA_SERVER_URI</font></td>
      <td width="30%"><font size="2">URI of Media Server</font></td>
    </tr>
    <tr> 
      <td width="30%"><font size="2">VCM_SERVER_URI</font></td>
      <td width="30%"><font size="2">URI of Voxeo Conference Manager</font></td>
    </tr>
    <tr> 
      <td width="30%"><font size="2">VXML_BROWSER_URI</font></td>
      <td width="30%"><font size="2">URI of Voice XML Browser</font></td>
    </tr>
  </table>
</blockquote>
</blockquote><br>

<h2>Running the Sample</h2>
<blockquote>
  <p>The top level directories and files in this sample are:</p>
  <table width="100%" border="0" align="center">
    <tr> 
    	<td width="10%"></td>
      <td><font size="2">docs/</font></td>
      <td><font size="2">the documentation about this sample </font></td>
    </tr>
    <tr> 
	    <td></td>
      <td><font size="2">play.sar</font></td>
      <td align="left"><font size="2">the application archive file (SAR) </font></td>
    </tr>
    <tr> 
	  <td></td>
      <td><font size="2">play/</font></td>
      <td><font size="2">the exploded application directory </font></td>
    </tr>
  </table>
	<p>Please follow the following steps to deploy, configure and run this sample:</p>
	<ol>
	<li>Start Voxeo Prism Media Server if you haven't. </li>
	<br>
	<li>Copy <em>play</em> directory (or <em>play.sar</em>) into <em><a href="../../../apps">apps</a></em> directory.</li>
	<br>
	<li>Use UA(e.g. X-Lite) to make the call to server. You should configure the domain of the callee as play.sample.prism.voxeo.com. You should configure your XLite to send outbound via proxy. By default, the proxy Address of your XLite configuration should be "127.0.0.1:5060" if the User Agent is on the same machine as SIPMethod Application Server, and the SIP listening port of SIPMethod server is 5060.</li>
	<br>
	</ol>
</blockquote><br>
<br>
<!--------------End of the Content ----------------------->
<table width="100%">
  <tr>
    <td colspan="3"><hr>
    </td>
  </tr>
</table>
</body>
